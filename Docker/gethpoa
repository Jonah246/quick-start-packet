FROM ethereum/client-go:alltools-v1.7.3
LABEL ken <ken.lin@infinitechain.io>

ENV WORK_DIR=/geth \
    GETH_DATA_DIR=/gethdata

RUN mkdir -p $WORK_DIR \
    mkdir -p $GETH_DATA_DIR

WORKDIR $WORK_DIR

RUN apk update && apk add bash

COPY ./scripts/.env.default \
     ./scripts/gethpoa_entrypoint.sh \
     ./template/gethpoa_genesis.json.tpl \
     $WORK_DIR/      

RUN $WORK_DIR/gethpoa_entrypoint.sh